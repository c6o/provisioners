apiVersion: apps/v1
kind: Deployment
metadata:
  name: "<%= applicationId %>"
  namespace: "{{namespace}}"
  labels:
    name: "<%= applicationId %>"
spec:
  selector:
    matchLabels:
      name: "<%= applicationId %>"
  template:
    metadata:
      labels:
        name: "<%= applicationId %>"
    spec:
      containers:
      - name: "<%= applicationId %>"
        image: "<%= containerImage %>:{{tag}}"
        ports:
<% if (containerPort > 0) { -%>
        - containerPort: <%= containerPort %>
<% } -%>
<% if (pvcEnabled) { -%>
<% if (pvcMountPath) { -%>
        volumeMounts:
          - mountPath: "<%= pvcMountPath %>"
            name: "<%= applicationId %>-volume"
<% } -%>
      volumes:
        - name: "<%= applicationId %>-volume"
          persistentVolumeClaim:
            claimName: "<%= applicationId %>-pvc"
<% } -%>