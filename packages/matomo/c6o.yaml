name: Matomo (formerly Piwik)
appId:  matomo
package: '@provisioner/appengine'
icon: icon.svg
description:
  Matomo (formerly Piwik) is the leading open-source analytics platform that gives you more than just powerful analytics

  * Free open-source software

  * 100% data ownership

  * User privacy protection

  * User-centric insights

  * Customisable and extensible


  Setup

  ----

  Matomo requires access to a MariaDB database which has to be created prior to the installation.


  Here is a sample script to get you started


    ~~~~

    CREATE DATABASE matomo;

    CREATE USER 'matomo'@'%' IDENTIFIED BY '88888888';

    GRANT ALL PRIVILEGES ON matomo.* TO 'matomo'@'%';

    FLUSH PRIVILEGES;

    SELECT User, Plugin FROM mysql.user;

    ~~~~

    Be sure to change the value '88888888' with a secure password.

summary:
  Matomo (formerly Piwik) is the leading open-source analytics platform that gives you more than just powerful analytics
category: analytics
keywords:
  - Analytics
  - Google Analytics
  - Web Tracking
  - User Insights

repo: https://github.com/matomo-org/docker
license: https://github.com/matomo-org/docker/blob/master/license.md
support: https://github.com/matomo-org/docker/issues

provisioner:
  repo: https://github.com/c6o/provisioners
  support: https://github.com/c6o/provisioners/issues

editions:
  - name: preview
    status: public
    spec:
      routes:
        - type: http
          targetService: matomo
      provisioner:
        package: '@provisioner/appengine'
        tag-prefix: appengine
        image: matomo
        ports: 80
        volumes:
          - name: matomo-data
            size: 5Gi
            mountPath: /var/www/html
      marina:
        launch:
          type: inline
          popUp: true


  - name: latest
    status: public
    spec:
      routes:
        - type: http
          targetService: matomo
      provisioner:
        package: '@provisioner/appengine'
        tag-prefix: appengine
        image: matomo
        ports: 80

        flow:
          prompts:
            - type: input
              name: MATOMO_DATABASE_HOST
              message: Specify the host name of your database server service (mariadb Service)
              default: mysql.database
              required: true
              c6o:
                label: Database Server

            - type: input
              name: MATOMO_DATABASE_ADAPTER
              message: Specify the database adapter of your database server service (mariadb Service)
              default: mariadb
              required: true
              c6o:
                label: Database Adapter

            - type: input
              name: MATOMO_DATABASE_DBNAME
              message: Specify the database name
              default: maotomo
              required: true
              c6o:
                label: Database Name

            - type: input
              name: MATOMO_DATABASE_USERNAME
              message: Username for the database
              default: matomo
              required: true
              c6o:
                label: Database Username

            - type: password
              name: MATOMO_DATABASE_PASSWORD
              message: Password for the database
              default: matomo
              required: true
              c6o:
                label: Database password

        volumes:
          - name: matomo-data
            size: 5Gi
            mountPath: /var/www/html
      marina:
        launch:
          type: inline
          popUp: true
