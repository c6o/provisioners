name: MediaWiki
appId: mediawiki
package: '@provisioner/appengine'
icon: icon.svg
summary:
  MediaWiki helps you collect and organize knowledge and make it available to people.

description:
  The MediaWiki software is used by tens of thousands of websites and thousands of companies and organizations. It powers Wikipedia and also this website. MediaWiki helps you collect and organize knowledge and make it available to people. It's powerful, multilingual, free and open, extensible, customizable, reliable, and free of charge. Find out more and if MediaWiki is right for you.


 Setup

  ----

  MediaWiki requires access to a MySql or MariaDB database along with a user with 'mysql_native_password' authentication.


  Here is a sample script to get you started


    ~~~~

    CREATE DATABASE my_wiki;

    CREATE USER 'mediawiki'@'%' IDENTIFIED BY '88888888';

    ALTER USER 'mediawiki'@'%' IDENTIFIED WITH mysql_native_password BY '88888888';

    GRANT ALL PRIVILEGES ON my_wiki.* TO 'mediawiki'@'%';

    FLUSH PRIVILEGES;

    SELECT User, Plugin FROM mysql.user;

    ~~~~

    Be sure to change the value '88888888' with a secure password.  You will be asked for the username and password in the MediaWiki installation.


    Post Installation Setup
    ------

    Once you finish installing MediaWiki, you will be prompted to download the LocalSettings.php file.  Save the file locally, and then upload it back to your cluster with the following command...


category: cms
keywords:
  - Wiki
  - Documentation
  - Docs

repo: https://github.com/wikimedia/mediawiki
license: https://github.com/wikimedia/mediawiki/blob/master/COPYING
support: https://phabricator.wikimedia.org/project/view/3094/

provisioner:
  repo: https://github.com/c6o/provisioners
  support: https://github.com/c6o/provisioners/issues

editions:
  - name: preview
    status: private   #NOT READY   LocalSettings.php   they generate it on the server during installtion but dont SAVE it on the server?  wtf
    default: true
    spec:
      routes:
        - type: http
          targetService: mediawiki
      provisioner:
        package: '@provisioner/appengine'
        tag-prefix: appengine
        name: mediawiki
        image: mediawiki
        port: 80
        automated: true

        config:

        volume:
          - size: 5Gi
            mountPath: /var/www/html/images
            name: mediawiki-images

          # - name: mediawiki-config
          #   size: 1Gi

          # - name: mediawiki-config
          #   subPath: LocalSettings.php
          #   mountPath: /var/www/html/

      marina:
        launch:
          type: inline
          popUp: true
