name: Moodle
appId: moodle
package: '@provisioner/appengine'
icon: icon.svg
summary:
  Moodle is the world's most popular learning management system. Start creating your online learning site in minutes!
description:
  Moodle is a learning platform designed to provide educators, administrators and learners with a single robust, secure and integrated system to create personalised learning environments. You can download the software onto your own web server or ask one of our knowledgeable Moodle Partners to assist you.

  Moodle is built by the Moodle project which is led and coordinated by Moodle HQ, which is financially supported by a network of over 80 Moodle Partner service companies worldwide.


  Setup

  ----

  Moodle requires access to a MariaDB database which has to be created prior to the installation.


  Here is a sample script to get you started


    ~~~~

    CREATE DATABASE moodle;

    CREATE USER 'moodle'@'%' IDENTIFIED BY '88888888';

    GRANT ALL PRIVILEGES ON moodle.* TO 'moodle'@'%';

    FLUSH PRIVILEGES;

    SELECT User, Plugin FROM mysql.user;

    ~~~~

    Be sure to change the value '88888888' with a secure password.

category: e-learning
keywords:
  - Learning Management System
  - LMS
  - Education
  - Educators
  - Knowledge

repo: https://github.com/moodle/moodle
license: https://github.com/moodle/moodle/blob/master/COPYING.txt
support: https://docs.moodle.org/

provisioner:
  repo: https://github.com/c6o/provisioners
  support: https://github.com/c6o/provisioners/issues

editions:
  - name: preview
    status: public
    spec:
      routes:
        - type: http
          targetService: moodle
      provisioner:
        package: '@provisioner/appengine'
        tag-prefix: appengine
        image: bitnami/moodle
        ports:
          - port: 8080
            name: http
            protocol: TCP
            probe:
              - type: startup
                timeoutSeconds: 5
                failureThreshold: 5
                periodSeconds: 5
                successThreshold: 1
                initialDelaySeconds: 180   #180 seconds or 3 minutes

        secret:
            - name: MOODLE_DATABASE_PASSWORD
              label: Database Password
              hint: Password for the admin user
              required: true
              autoselect: true
              fieldType: password

            - name: MOODLE_PASSWORD
              label: Administrator password
              hint: Password for the admin user
              required: true
              autoselect: true
              fieldType: password
        config:
            - name: MOODLE_DATABASE_HOST
              label: Database Host
              hint: Host for the database server (Service)
              required: true
              autoselect: true
              fieldType: text

            - name: MOODLE_DATABASE_USER
              label: Database Username
              hint: Username for the database
              required: true
              autoselect: true
              fieldType: text

            - name: MOODLE_USERNAME
              label: Administrator username
              hint: Username for the admin user
              required: true
              autoselect: true
              fieldType: text
              value: admin

            - name: MOODLE_EMAIL
              label: Administrator email address
              hint: Email address for the admin user
              required: true
              autoselect: true
              fieldType: text
              value: admin@mysite.com

            - name: MOODLE_DATABASE_TYPE
              value: mariadb

            - name: MOODLE_DATABASE_NAME
              value: moodle

            - name: ALLOW_EMPTY_PASSWORD
              value: no
        volumes:
            - size: 5Gi
              mountPath: /bitnami
              name: moodle-data
      marina:
        launch:
          type: inline
          popUp: true
